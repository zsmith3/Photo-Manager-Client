<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="width=device-width, user-scalable=no">
		<title>ZSmith FileServer</title>

		<!-- Unique favicon for this division of the site -->
		<link rel="icon" href="icons/favicon.ico" />

		<!-- Import custom element templates TODO put project scripts/stylesheets in templates.html -->
		<div id="imports">
			<link rel="import" href="templates/mdc-templates.html" />
			<link rel="import" href="templates/templates.html" />
		</div>

		<!-- External/public stylesheets -->
		<link rel="stylesheet" type="text/css" href="css/default.css" />
		<link rel="stylesheet" type="text/css" href="css/misc.css" />

		<!-- Project stylesheets -->
		<link rel="stylesheet" type="text/css" href="css/platforms.css" />

		<link rel="stylesheet" type="text/css" href="css/elements/regions/AddressBar.css" />
		<link rel="stylesheet" type="text/css" href="css/elements/regions/FilesContainer.css" />
		<link rel="stylesheet" type="text/css" href="css/elements/regions/FilterBar.css" />
		<link rel="stylesheet" type="text/css" href="css/elements/regions/InfoColumn.css" />
		<link rel="stylesheet" type="text/css" href="css/elements/regions/NavigationDrawer.css" />
		<link rel="stylesheet" type="text/css" href="css/elements/regions/Map.css" />
		<link rel="stylesheet" type="text/css" href="css/elements/regions/SortBar.css" />
		<link rel="stylesheet" type="text/css" href="css/elements/regions/ToolBar.css" />]

		<link rel="stylesheet" type="text/css" href="css/elements/ImageModal.css" />

		<script src="js/default.js"></script>
		<!-- External/public scripts -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAX_6NiibPoSfF_21RhvOTNND8XHKsmSs8&libraries=places" async defer></script>
		<script src="js/external/cookie.js"></script>
		<script src="js/external/msgpack.js"></script>
		<script src="js/external/jquery.js"></script>
		<!-- <script src="js/external/jquery.dotdotdot.js"></script> -->
		<script src="js/external/hammer.js"></script>
		<script src="js/external/Sortable.js"></script>


		<!-- Project scripts -->

		<script src="js/models/Album.js"></script>
		<script src="js/models/Face.js"></script>
		<script src="js/models/File.js"></script>
		<script src="js/models/Person.js"></script>
		<script src="js/models/Geotag.js"></script>
		<script src="js/models/Config.js"></script>

		<script src="js/elements/regions/InfoColumn.js"></script>
		<script src="js/elements/regions/NavigationDrawer.js"></script>
		<script src="js/elements/regions/AddressBar.js"></script>
		<script src="js/elements/regions/ToolBar.js"></script>
		<script src="js/elements/regions/SortBar.js"></script>
		<script src="js/elements/regions/FilterBar.js"></script>
		<script src="js/elements/regions/Map.js"></script>
		<script src="js/elements/regions/FilesContainer.js"></script>

		<script src="js/elements/popups/ContextMenu.js"></script>
		<script src="js/elements/popups/InfoPopup.js"></script>
		<script src="js/elements/popups/ImageModal.js"></script>

		<script src="js/elements/filebox/Filebox.js"></script>
		<script src="js/elements/filebox/Facebox.js"></script>
		<script src="js/elements/filebox/Personbox.js"></script>

		<script src="js/controllers/FileViews.js"></script>
		<script src="js/controllers/PageLoader.js"></script>
		<script src="js/controllers/Input.js"></script>
		<script src="js/controllers/Events.js"></script>

		<script src="js/utils.js"></script>
		<script src="js/default_end.js"></script>
	</head>

	<body>
		<!-- Displayed in absence of Javascript -->
		<noscript>
			<div id="noscriptdisp">
				⚠You currently have Javascript disabled in your browser. This site relies heavily on Javascript, so it must be enabled to use the site properly. Please click <a href="https://www.whatismybrowser.com/guides/how-to-enable-javascript/" target="_blank">here</a> for a guide on enabling Javascript in different browsers. Once you've enabled it, you will need to reload this page (press F5 on your keyboard) to use it properly.⚠
			</div>
		</noscript>

		<!-- A set of HTML modals, which can be displayed by JavaScript -->
		<div id="modals">
			<mdc-modal id="albumModal" header="Add files to album" data-list="true" data-newtype="child" data-newlabel="New Album" onaccept="Album.getById(this.value).addFiles(pageLoader.filesContainer.selection);"></mdc-modal>

			<mdc-modal id="tagModal" header="Tag files" data-list="true" data-newtype="item" data-newlabel="New Tag" onaccept="setModalInp('tag', 'tagText');"></mdc-modal>

			<mdc-modal id="commentModal" header="Comment on files" onaccept="document.forms['selectform'].selAction.value = 'commentText'; document.forms['selectform'].selValue.value = $('#commentText').val(); submitPost(2000);">
				<p>Please enter the comment you wish to add</p>
				<mdc-text name="commentText" id="commentText" label="New comment"></mdc-text>
				<div style="height: 5vh;"></div>
			</mdc-modal>

			<!-- TODO not sure if this even works
			<div id="uploadModal" class="modal">
				<div id="uploadContent" class="modal-content">
					<h2>Upload Files</h2>
					<p>Please select the files you wish to upload</p>
					<form method="post" enctype="multipart/form-data" name="uploadImage">
						<div style="height: 2vh;"></div>
						<div class="file-field input-field">
							<div class="btn">
								<span>Choose File</span>
								<input type="file" name="filesToUpload[]" id="filesToUpload" multiple="multiple" />
							</div>
							<div class="file-path-wrapper">
								<input class="file-path validate" type="text" placeholder="Upload one or more files">
							</div>
						</div>
					</form>
					<div style="height: 2vh;"></div>
				</div>
				<div class="modal-footer">
					<button class="modal-action modal-close waves-effect waves-red btn-flat">Cancel</button>
					<button class="modal-action modal-close waves-effect waves-green btn-flat" type="submit">Upload Files</button>
				</div>
			</div> -->

			<mdc-modal id="modal-generic-add" header="New Type">
				<p>Please enter the name of the new <span id="modal-generic-add-subtitle"></span>.</p>
				<div>
					<input type="hidden" id="modal-generic-add-parentid" />
					<mdc-text id="modal-generic-add-parent" readonly></mdc-text><mdc-text id="modal-generic-add-name" label="New Type"></mdc-text>
				</div>
			</mdc-modal>

			<!-- <mdc-modal id="modal-people-add" header="Add new person" onaccept="Person.create($(this).find('#modal-people-add-groupid').val(), $(this).find('#modal-people-add-name').val());">
				<p>Please enter the name of the new person.</p>
				<div>
					<input type="hidden" id="modal-people-add-groupid" />
					<mdc-text id="modal-people-add-name" label="New Person"></mdc-text>
				</div>
			</mdc-modal>

			<mdc-modal id="modal-albums-add" header="Create new album" onaccept="Album.create($(this).find('#modal-albums-add-parentid').val(), $(this).find('#modal-albums-add-name').val());">
				<p>Please enter the name of your new album.</p>
				<div>
					<input type="hidden" id="modal-albums-add-parentid" />
					<mdc-text id="modal-albums-add-parent" readonly></mdc-text><mdc-text id="modal-albums-add-name" label="New Album"></mdc-text>
				</div>
			</mdc-modal> -->

			<mdc-modal id="addLinkModal" header="Create sharable link to current page">
				<p>Please enter a name for your new link. Links should ideally be named in the format "[name of collection] for [name of recipient]". Don't forget to use filters or albums to refine the selection you want to be accessible.</p>
				<mdc-text name="linkInp" id="linkInp" label="Link name"></mdc-text>
				<!--<div id="linkOptions"> See notes in uriFitsLink (Membership.php) - this is too difficult to implement effectively right now
					<input type="checkbox" name="linkPage" value="true" /><span>Restrict to current page</span>
					<br />
					<input type="checkbox" name="linkSubfolders" value="true" /><span>Allow access to subfolder contents</span>
				</div>
				<br />-->
				<br />
				<br />
				<p>
					Once created, your link will appear on the left. You can then copy the URL to share it.
				</p>
			</mdc-modal>

			<mdc-modal id="linkModal">
				<h3 id="linkName"></h3>
				<p>Parameters: <span id="linkParams"></span></p>
				<p>Code: <span id="linkCode"></span></p>
				<p>Expires in: <span id="linkTime"></span></p>
				<h4>Link: </h4><a id="linkLink" value="hi"></a>
				<br />
				<br />
				<button class="waves-effect waves-light btn copybtn">Copy Link</button>
				<p id="linkErr"></p>
			</mdc-modal>

			<mdc-modal id="modal-geotag" header="Geotag files" onaccept="GeoTag.modalOnAccept(this);">
				<!-- <map-edit id="modal-geotag-map"></map-edit> -->
				<map-edit id="modal-geotag-map"></map-edit>

				<form id="modal-geotag-form">
					<mdc-tabs id="modal-geotag-form-tabs" onchange="$('#modal-geotag-map').get(0).changeTab(this.getTabName());">
						<nav class="mdc-tab-bar">
							<a class="mdc-tab mdc-tab--active" value="area">Area</a>
							<a class="mdc-tab" value="location">Location</a>
							<span class="mdc-tab-bar__indicator"></span>
						</nav>

						<div id="modal-geotag-form-tabs-area" class="mdc-tab-contents">
							<mdc-select id="modal-geotag-form-area-title" label="Area Name" data-new="New Area" data-width="true" onchange="if ($(this).val() != 'new') $('#modal-geotag-map').get(0).showArea(GeoTagArea.getById($(this).val()));"></mdc-select>

							<br />

							<mdc-textarea id="modal-geotag-form-area-address" label="Address"></mdc-textarea>

							<br />

							<mdc-text id="modal-geotag-form-area-lat" label="Latitude"></mdc-text>
							<mdc-text id="modal-geotag-form-area-lng" label="Longitude"></mdc-text>

							<br />

							<mdc-slider id="modal-geotag-form-area-radius" oninput="$('#modal-geotag-map').get(0).api.selectCircle.setRadius(Math.pow(this.value, 3)); $('#modal-geotag-map').get(0).checkLocInArea();" max="20" step="0.1" value="8"></mdc-slider>
						</div>

						<div id="modal-geotag-form-tabs-location" class="mdc-tab-contents">
							<div id="modal-geotag-form-location-empty">
								<br />
								Select a file to add a geolocation.
							</div>

							<div id="modal-geotag-form-location-single">
								<br />

								<div class="mdc-form-field">
									<mdc-checkbox onchange="let parent = this; $('#modal-geotag-form-location-lat, #modal-geotag-form-location-lng').each(function () { this.api.disabled = !parent.checked; });"></mdc-checkbox>
									Assign individual geolocation
								</div>

								<mdc-text id="modal-geotag-form-location-lat" disabled data-type="number" label="Latitude" oninput="$('#modal-geotag-map').get(0).placeSelectMarker(new google.maps.LatLng(parseFloat(this.value), parseFloat($(this).next().val())));"></mdc-text>
								<mdc-text id="modal-geotag-form-location-lng" disabled data-type="number" label="Longitude" oninput="$('#modal-geotag-map').get(0).placeSelectMarker(new google.maps.LatLng(parseFloat($(this).prev().val()), parseFloat(this.value)));"></mdc-text>
							</div>

							<div id="modal-geotag-form-location-multiple">

							</div>
							<!-- TODO vary content shown here dependant on file count selected -->
						</div>
					</mdc-tabs>

				</form>
			</mdc-modal>

			<mdc-modal id="modal-people-face-set" header="Set/Change Person" data-list="true" data-newtype="group" data-newlabel="New Person" onaccept="let modal = this; pageLoader.filesContainer.selection.forEach(function (id) { Face.getById(id).setPerson($(modal).val()); });"></mdc-modal>

			<mdc-modal id="errorModal" header="An Error has Occurred" onaccept="window.location.reload();">
				<br />
				<br />
				<p>
					An unknown error has occurred. This is usually the result of a network issue while fetching data from the server. Try refreshing the page, returning to the home page or checking your internet settings. If the error persists, contact the site administrator to report it.
				</p>
				<br />
				<br />
			</mdc-modal>

			<image-modal onclick="if (event.target == this) this.hide();">
				<div id="im-toolbar">
					<div id="iPIconsLeft"></div>

					<p id="iPFileName"></p>

					<div id="iPIconsRight"></div>

					<span id="closeImgPopup" class="material-icons" onclick="this.modal.hide();">clear</span>
					<span id="iPOptions" class="material-icons" onclick="$('#optionsButton')[0].onclick();">more_vert</span>
				</div>

				<div id="im-main">
					<div class="im-arrow material-icons" id="im-arrow-left" onclick="event.stopPropagation(); this.modal.switchFile(-1);">keyboard_arrow_left</div>
					<div class="im-arrow material-icons" id="im-arrow-right" onclick="event.stopPropagation(); this.modal.switchFile(1);">keyboard_arrow_right</div>
					<i class="material-icons iPArrowInd" id="iPArrowIndLeft">keyboard_arrow_left</i>
					<i class="material-icons iPArrowInd" id="iPArrowIndRight">keyboard_arrow_right</i>

					<img id="im-image" class="im-image-hidden" onmousedown="this.modal.startDrag(event);" ondblclick="this.modal.setZoom('min', 'min', 'c', 'c');" onwheel="this.modal.zoom(1 - event.deltaY / 500, event.clientX, event.clientY);" />
				</div>
			</image-modal>

			<mdc-modal id="modal-confirm" header="Are you sure?">
				<span id="modal-confirm-warning"></span>
				<br />
				<h3>Options:</h3>
				<div id="modal-confirm-options">None<br /></div>
			</mdc-modal>

			<!-- <ul id="optionsList" class="z-depth-2 settingsList">
				<li class="optionsItem waves-effect">
					Username
				</li>
				<li class="optionsItem waves-effect" onclick="window.location = 'gallery.html' + window.location.search;" title="Switch display mode">
					Switch to Gallery mode
				</li>
				<li class="optionsItem waves-effect" onclick="window.open('settings.html', '_blank');" title="Change configuration settings">
					Settings
				</li>
				<li class="optionsItem waves-effect" onclick="window.open('feedback.html', '_blank');" title="Give feedback or report a bug">
					Feedback
				</li>
				<li class="optionsItem waves-effect" onclick="window.location = 'login.html?status=loggedout';" title="Log out of your account">
					Log Out
				</li>
			</ul> -->
		</div>

		<!-- Loading display before any data is retrieved TODO -->
		<!-- <div id="fullpage-loader">
			<div class="preloader-wrapper active">
				<div class="spinner-layer spinner-red-only">
					<div class="circle-clipper left">
						<div class="circle"></div>
					</div>
					<div class="gap-patch">
						<div class="circle"></div>
					</div>
					<div class="circle-clipper right">
						<div class="circle"></div>
					</div>
				</div>
			</div>
		</div> -->


		<form id="configform" name="configform"></form>


		<!-- Header section -->
		<header class="mdc-toolbar mdc-toolbar--fixed">
			<div id="header" class="mdc-toolbar__row">
				<section class="mdc-toolbar__section mdc-toolbar__section--align-start">
					<i id="nav-drawer-open" class="material-icons mdc-toolbar__icon mdc-icon-toggle" onclick="navigationDrawer.api.open = true;">menu</i>
					<!-- <a href="/" id="siteHomeLink">Site Homepage</a> -->
					<span class="mdc-toolbar__title">
						ZSmith Fileserver
					</span>
				</section>

				<section class="mdc-toolbar__section mdc-toolbar__section--align-end">
					<mdc-menu id="optionsButton-menu" class="mdc-menu-anchor">
						<i id="optionsButton-set" class="material-icons mdc-toolbar__icon mdc-icon-toggle" onclick="$(this).parent().get(0).open();">settings</i>
						<option id="optionsButton-menu-username">Username</option>
						<option onclick="window.location = 'gallery.html' + window.location.search;" title="Switch display mode" disabled>Switch to Gallery mode</option>
						<option onclick="window.open('settings.html', '_blank');" title="Change configuration settings" disabled>Settings</option>
						<option onclick="window.open('feedback.html', '_blank');" title="Give feedback or report a bug" disabled>Feedback</option>
						<option onclick="pageLoader.logOut();" title="Log out of your account">Log Out</option>
					</mdc-menu>

					<mdc-menu id="toolBar-menu" class="mdc-menu-anchor">
						<i id="toolBar-menu-button" class="material-icons mdc-toolbar__icon mdc-icon-toggle" onclick="$(this).parent().get(0).open();">more_vert</i>
					</mdc-menu>
				</section>


				<!-- <button id="optionsButton" class="waves-effect btn">
					<i class="material-icons ob-set">settings</i>
					<i class="material-icons ob-more">more_vert</i>
				</button> -->

				<!-- <div id="optionsmenu" class="mdc-menu-anchor">
					<i id="optionsButton-set" class="mdc-icon-toggle material-icons">settings</i>
					<i id="optionsButton-more" class="mdc-icon-toggle material-icons">more_vert</i>
				</div> -->

			</div>
		</header>


		<!-- Main page -->
		<div id="filebrowser" class="content mdc-toolbar-fixed-adjust row">
			<!-- Hoverinfo popup to display file details -->
			<info-popup id="infoPopup" class="mdc-elevation--z8"></info-popup>

			<!-- Contextmenu popup to display options -->
			<context-menu id="contextMenu"></context-menu>

			<!-- Navigation drawer with general data (albums, people, links) -->
			<nav-drawer id="navigationDrawer" class="mdc-drawer mdc-drawer--permanent mdc-elevation--z6">
				<nav id="albums">
					<span class="mdc-list-item nav-title mdc-ripple-surface">
						<a class="albumListName" href="/albums/">
							<h4>Albums</h4>
						</a>
						<hover-icon-button onclick="toolBar.showAddModal('album', undefined, '', this).then(function (data) { Album.create(data.parent, data.name); });">add</hover-icon-button>
					</span>
					<!-- <a href="?album=" class="link">
						<h3 class="leftCTitle">Albums</h3>
					</a>
					<ul class="leftcolList"></ul> -->
				</nav>

				<hr class="mdc-list-divider" />

				<nav id="people">
					<span class="mdc-list-item nav-title mdc-ripple-surface">
						<a class="people-group-name" href="/people/">
							<h4>People</h4>
						</a>
						<hover-icon-button onclick="toolBar.showAddModal('group', null, null, this).then(function (data) { PersonGroup.create(data.name); });">add</hover-icon-button>
					</span>
					<!-- <a href="?person=" class="link">
						<h3 class="leftCTitle">People</h3>
					</a>
					<ul class="leftcolList collapsible z-depth-0"></ul> -->
				</nav>

				<hr class="mdc-list-divider" />

				<nav id="links">
					<!-- <form id="linkDelForm" name="linkDelForm" method="post">
						<h3 class="leftCTitle">My Links</h3>
						<ul class="leftcolList"></ul>
					</form> -->
				</nav>
			</nav-drawer>

			<!-- Main section of the page -->
			<main id="maincol" class="col">
				<!-- Management bars at the top of the page -->
				<div id="bars" class="mdc-elevation--z4">
					<!-- Address bar and search display -->
					<address-bar id="addressBar">
						<div id="addressBar-nav-icons">
							<a id="addressBar-arrow-left" class="mdc-icon-toggle material-icons" title="Back" data-rel="back">arrow_back</a>

							<a id="addressBar-arrow-right" class="mdc-icon-toggle material-icons" title="Forward" data-rel="forward">arrow_forward</a>

							<a id="addressBar-arrow-up" class="mdc-icon-toggle material-icons" title="Up">arrow_upward</a>

							<a href="/" class="mdc-icon-toggle material-icons" title="Return to root folders">home</a>
						</div>

						<div id="addressBar-address-box" class="mdc-chip">
							<p id="addressBar-address">/</p>
						</div>
						<div id="search" onkeydown="if (event.key == 'Enter') pageLoader.refreshFilesData(null, null, {'search': $(this).find('#searchinput').val()});">
							<mdc-text id="searchinput" placeholder="Search" data-icon-after="search" data-icon-before="arrow_back" title="Search the current view for files" onsubmit="pageLoader.refreshFilesData(null, null, {'search': $(this).val()});"></mdc-text>
						</div>
					</address-bar>

					<!-- Toolbar, containing functions relating to the management and categorisation of files -->
					<tool-bar id="toolBar" data-axis="max-height" data-size="200px">
						<button class="tool-button tool-button-small mdc-button mdc-button--raised mdc-theme--secondary-bg mdc-ripple-surface" onclick="pageLoader.filesContainer.selectAll(true);" title="Select all items on the current page">
							<i class="material-icons">select_all</i>
							<span class="toolbar-text">Select All</span>
						</button>

						<br />

						<button class="tool-button tool-button-small mdc-button mdc-button--raised mdc-theme--secondary-bg mdc-ripple-surface" onclick="pageLoader.filesContainer.selectAll(false);" title="Clear the current selection">
							<i class="material-icons">clear</i>
							<span class="toolbar-text">Select None</span>
						</button>

						<br />

						<button class="tool-button tool-button-small mdc-button mdc-button--raised mdc-theme--secondary-bg mdc-ripple-surface" onclick="pageLoader.filesContainer.invertSelection();" title="Invert which files are selected">
							<i class="material-icons">invert_colors</i>
							<span class="toolbar-text">Invert Selection</span>
						</button>

						<div id="toolBar-large-container"></div>
					</tool-bar>

					<!-- Sortbar, containing functions relating to the display of files on the page -->
					<sort-bar id="sortBar">
						<mdc-tabs onchange="pageLoader.setView(this.getTabName());" data-nochange="true">
							<nav id="sortbar-viewswitcher" class="mdc-tab-bar mdc-tab-bar--icon-tab-bar">
								<a class="mdc-tab mdc-tab--active" value="files" title="Files View">
									<i class="material-icons mdc-tab__icon">view_module</i>
								</a>
								<a class="mdc-tab" value="comments" title="Comments View">
									<i class="material-icons mdc-tab__icon">mode_comment</i>
								</a>
								<a class="mdc-tab" value="map" title="Map View">
									<i class="material-icons mdc-tab__icon">map</i>
								</a>
								<a class="mdc-tab" value="faces" title="Faces View">
									<i class="material-icons mdc-tab__icon">face</i>
								</a>
								<span class="mdc-tab-bar__indicator"></span>
							</nav>
						</mdc-tabs>

						<div id="thumbScaleDiv">
							<mdc-slider name="thumbScaler" id="thumbScaler" title="Change Thumbnail Size" oninput="pageLoader.filesContainer.scaleFiles(this.value);" onchange="pageLoader.config.set('thumb_scale', Math.round(this.value));" ondblclick="this.value = pageLoader.config.defaults.thumb_scale.default.desktop; this.oninput(); this.onchange();"></mdc-slider>
						</div>

						<div id="pageNumbers"></div>

						<i id="infoColumn-show" class="mdc-icon-toggle material-icons" onclick="$('#infoColumn').get(0).toggle();" title="Toggle the details pane">info_outline</i>
						<i id="toolBar-show" class="mdc-icon-toggle material-icons" onclick="$('#toolBar').get(0).toggle();" title="Toggle the toolbar">build</i>
						<i id="filterBar-show" class="mdc-icon-toggle material-icons" onclick="$('#filterBar').get(0).toggle();" title="Toggle the filtering options">filter_list</i>

						<mdc-select name="filecount" id="filecount" label="Files per page" onchange="pageLoader.refreshPage(this.value, null);">
							<option value="10">10</option>
							<option value="25">25</option>
							<option value="50">50</option>
							<option value="100">100</option>
							<option value="200">200</option>
							<option value="inf">Unlimited</option>
						</mdc-select>

						<mdc-select name="select_mode" id="select-mode" label="Selection mode" onchange="pageLoader.config.set('select_mode', this.value);">
							<option value="0" title="Click to select, double-click to open">Standard</option>
							<option value="1" title="Click to open, no selection">View</option>
							<option value="2" title="Click to select, no opening">Select</option>
						</mdc-select>
					</sort-bar>

					<!-- Filter bar, containing options relating to the filtering of files shown -->
					<filter-bar id="filterBar" data-axis="max-height" data-size="50vh">
						<h3 id="filterBar-title">Filters:</h3>
						<br />
						<ul id="filterBar-list">
							<button id="filterBar-button-add" type="button" class="mdc-fab mdc-ripple-surface material-icons" onclick="$(this).closest('#filterBar').get(0).add();">add</button>
						</ul>

						<mdc-checkbox id="filterBar-isf-check" name="include_subfolders" label="Include subfolder contents"></mdc-checkbox>

						<br />
						<br />
						<br />
						<br />

						<button type="button" class="mdc-button mdc-button--raised mdc-theme--secondary-bg mdc-theme--text-primary-on-secondary mdc-ripple-surface" id="filterBar-button-submit" onclick="$(this).closest('#filterBar').get(0).submit();">Go</button>
						<div style='clear:both;'></div>
					</filter-bar>
				</div>

				<!-- Page content (files) -->
				<div id="content">
					<!-- Buttons to switch page views -->
					<!-- <div id="viewSwitchDiv" class="mdc-elevation--z1">
						<button class="viewSwitcher mdc-ripple-surface material-icons" data-view="files" title="Files View" onclick="refreshGetData(addGet({'view': $(this).attr('data-view')}));">view_module</button>
						<button class="viewSwitcher mdc-ripple-surface material-icons" data-view="comments" title="Comments View" onclick="refreshGetData(addGet({'view': $(this).attr('data-view')}));">mode_comment</button>
						<button class="viewSwitcher mdc-ripple-surface material-icons" data-view="map" title="Map View" onclick="refreshGetData(addGet({'view': $(this).attr('data-view')}));">map</button>
						<button class="viewSwitcher mdc-ripple-surface material-icons" data-view="faces" title="People View" onclick="refreshGetData(addGet({'view': $(this).attr('data-view')}));">face</button>
					</div> -->

					<!-- Files container -->
					<div id="files" onclick="/*TODO if (!(ctrlDown || shiftDown))*/ $(this).find('files-container').get(0).selectAll(false);" onmouseout="infoPopup.hide(this, event);">
						<!-- Progress bar -->
						<div class="mdc-linear-progress mdc-linear-progress--indeterminate">
							<!-- <div class="mdc-linear-progress__buffering-dots"></div> -->
							<div class="mdc-linear-progress__buffer"></div>
							<div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
								<span class="mdc-linear-progress__bar-inner"></span>
							</div>
							<div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
								<span class="mdc-linear-progress__bar-inner"></span>
							</div>
						</div>


						<!-- <input name="selAction" type="hidden" />
						<input name="selValue" type="hidden" /> -->

						<files-container id="filesContainer"></files-container>
						<map-view id="filesMap"></map-view>
					</div>

					<!-- File details pane -->
					<info-column id="infoColumn" class="mdc-elevation--z2" data-axis="width" data-size="320px">
						<div id="infocolumn-content">
							<h3>Details</h3>
							<div id="infocolumn-thumbdiv">
								<img id="infocolumn-thumb" />
								<i class="material-icons" id="infocolumn-thumb-icon">folder</i>

								<i class="material-icons" id="infocolumn-star">star</i>
								<i class="material-icons" id="infocolumn-bin">delete</i>
								<i class="material-icons" id="infocolumn-tick">check</i>
							</div>
							<br />
							<span id="infocolumn-info-name"></span>
							<br />
							<br />
							<!-- <div id="infocolumn-info">

							</div> -->
							<table id="infocolumn-info">
								<tr>
									<th>Type</th>
									<td id="infocolumn-info-type"></td>
								</tr>
								<tr>
									<th>Geotag</th>
									<td id="infocolumn-info-geotag"></td>
								</tr>
								<tr>
									<th>Size</th>
									<td id="infocolumn-info-size"></td>
								</tr>
								<tr>
									<th>File Count</th>
									<td id="infocolumn-info-fcount"></td>
								</tr>
							</table>
						</div>
					</info-column>
				</div>
			</main>
		</div>
	</body>
</html>
